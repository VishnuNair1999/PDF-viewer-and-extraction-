{"ast":null,"code":"import _asyncToGenerator from\"C:\\\\Users\\\\vishn\\\\Desktop\\\\AuthInMern\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _slicedToArray from\"C:\\\\Users\\\\vishn\\\\Desktop\\\\AuthInMern\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\vishn\\\\Desktop\\\\AuthInMern\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState}from\"react\";import{PDFDocument}from\"pdf-lib\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Home=function Home(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),pdfFileData=_useState2[0],setPdfFileData=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),errorMessage=_useState4[0],setErrorMessage=_useState4[1];var readFileAsync=function readFileAsync(file){return new Promise(function(resolve,reject){var reader=new FileReader();reader.onload=function(){resolve(reader.result);};reader.onerror=reject;reader.readAsArrayBuffer(file);});};var renderPdf=function renderPdf(uint8array){var tempblob=new Blob([uint8array],{type:\"application/pdf\"});var docUrl=URL.createObjectURL(tempblob);setPdfFileData(docUrl);};var range=function range(start,end){var length=end-start+1;return Array.from({length:length},function(_,i){return start+i-1;});};var extractPdfPage=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(arrayBuff){var pdfSrcDoc,pdfNewDoc,pages,newpdf;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return PDFDocument.load(arrayBuff);case 3:pdfSrcDoc=_context.sent;_context.next=6;return PDFDocument.create();case 6:pdfNewDoc=_context.sent;_context.next=9;return pdfNewDoc.copyPages(pdfSrcDoc,range(2,3));case 9:pages=_context.sent;pages.forEach(function(page){return pdfNewDoc.addPage(page);});_context.next=13;return pdfNewDoc.save();case 13:newpdf=_context.sent;return _context.abrupt(\"return\",newpdf);case 17:_context.prev=17;_context.t0=_context[\"catch\"](0);setErrorMessage(\"Error extracting PDF pages.\");console.error(_context.t0);return _context.abrupt(\"return\",null);case 22:case\"end\":return _context.stop();}}},_callee,null,[[0,17]]);}));return function extractPdfPage(_x){return _ref.apply(this,arguments);};}();var onFileSelected=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var fileList,pdfArrayBuffer,newPdfDoc;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setErrorMessage(\"\");// Clear any previous error messages\nfileList=e.target.files;if(!((fileList===null||fileList===void 0?void 0:fileList.length)>0)){_context2.next=17;break;}_context2.prev=3;_context2.next=6;return readFileAsync(fileList[0]);case 6:pdfArrayBuffer=_context2.sent;_context2.next=9;return extractPdfPage(pdfArrayBuffer);case 9:newPdfDoc=_context2.sent;if(newPdfDoc){renderPdf(newPdfDoc);}_context2.next=17;break;case 13:_context2.prev=13;_context2.t0=_context2[\"catch\"](3);setErrorMessage(\"Error loading or processing the selected PDF file.\");console.error(_context2.t0);case 17:case\"end\":return _context2.stop();}}},_callee2,null,[[3,13]]);}));return function onFileSelected(_x2){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"file-selector\",accept:\".pdf\",onChange:onFileSelected}),errorMessage&&/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\"},children:errorMessage}),/*#__PURE__*/_jsx(\"iframe\",{style:{display:\"block\",width:\"100vw\",height:\"90vh\"},title:\"PdfFrame\",src:pdfFileData,frameBorder:\"0\",type:\"application/pdf\"})]});};export default Home;","map":{"version":3,"sources":["C:/Users/vishn/Desktop/AuthInMern/client/src/components/pdfViewer/pdfViewer.js"],"names":["React","useState","PDFDocument","Home","pdfFileData","setPdfFileData","errorMessage","setErrorMessage","readFileAsync","file","Promise","resolve","reject","reader","FileReader","onload","result","onerror","readAsArrayBuffer","renderPdf","uint8array","tempblob","Blob","type","docUrl","URL","createObjectURL","range","start","end","length","Array","from","_","i","extractPdfPage","arrayBuff","load","pdfSrcDoc","create","pdfNewDoc","copyPages","pages","forEach","page","addPage","save","newpdf","console","error","onFileSelected","e","fileList","target","files","pdfArrayBuffer","newPdfDoc","color","display","width","height"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport { PDFDocument } from \"pdf-lib\";\r\n\r\nconst Home = () => {\r\n  const [pdfFileData, setPdfFileData] = useState();\r\n  const [errorMessage, setErrorMessage] = useState(\"\");\r\n\r\n  const readFileAsync = (file) => {\r\n    return new Promise((resolve, reject) => {\r\n      let reader = new FileReader();\r\n      reader.onload = () => {\r\n        resolve(reader.result);\r\n      };\r\n      reader.onerror = reject;\r\n      reader.readAsArrayBuffer(file);\r\n    });\r\n  };\r\n\r\n  const renderPdf = (uint8array) => {\r\n    const tempblob = new Blob([uint8array], { type: \"application/pdf\" });\r\n    const docUrl = URL.createObjectURL(tempblob);\r\n    setPdfFileData(docUrl);\r\n  };\r\n\r\n  const range = (start, end) => {\r\n    let length = end - start + 1;\r\n    return Array.from({ length }, (_, i) => start + i - 1);\r\n  };\r\n\r\n  const extractPdfPage = async (arrayBuff) => {\r\n    try {\r\n      const pdfSrcDoc = await PDFDocument.load(arrayBuff);\r\n      const pdfNewDoc = await PDFDocument.create();\r\n      const pages = await pdfNewDoc.copyPages(pdfSrcDoc, range(2, 3));\r\n      pages.forEach((page) => pdfNewDoc.addPage(page));\r\n      const newpdf = await pdfNewDoc.save();\r\n      return newpdf;\r\n    } catch (error) {\r\n      setErrorMessage(\"Error extracting PDF pages.\");\r\n      console.error(error);\r\n      return null;\r\n    }\r\n  };\r\n\r\n  const onFileSelected = async (e) => {\r\n    setErrorMessage(\"\"); // Clear any previous error messages\r\n    const fileList = e.target.files;\r\n    if (fileList?.length > 0) {\r\n      try {\r\n        const pdfArrayBuffer = await readFileAsync(fileList[0]);\r\n        const newPdfDoc = await extractPdfPage(pdfArrayBuffer);\r\n        if (newPdfDoc) {\r\n          renderPdf(newPdfDoc);\r\n        }\r\n      } catch (error) {\r\n        setErrorMessage(\"Error loading or processing the selected PDF file.\");\r\n        console.error(error);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      \r\n      <input type=\"file\" id=\"file-selector\" accept=\".pdf\" onChange={onFileSelected} />\r\n      {errorMessage && <p style={{ color: \"red\" }}>{errorMessage}</p>}\r\n      <iframe\r\n        style={{ display: \"block\", width: \"100vw\", height: \"90vh\" }}\r\n        title=\"PdfFrame\"\r\n        src={pdfFileData}\r\n        frameBorder=\"0\"\r\n        type=\"application/pdf\"\r\n      ></iframe>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n"]},"metadata":{},"sourceType":"module"}