{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { TimelineCard } from './TimelineCard';\nimport { addYearsFlags } from './utils';\nimport { caretAltLeftIcon, caretAltRightIcon } from '@progress/kendo-svg-icons';\nimport { useInternationalization } from '@progress/kendo-react-intl';\nimport { classNames, canUseDOM, SvgIcon, Navigation } from '@progress/kendo-react-common';\nexport var TimelineHorizontal = function (props) {\n  var DEFAULT_EVENT_POINT_WITH = 150;\n  var EVENT_CARD_TRANSITION_DURATION = 300;\n  var intl = useInternationalization();\n\n  var _a = React.useState(false),\n      arrowLeft = _a[0],\n      setArrowLeft = _a[1];\n\n  var _b = React.useState(true),\n      arrowRight = _b[0],\n      setArrowRight = _b[1];\n\n  var _c = React.useState(),\n      calloutOffset = _c[0],\n      setCalloutOffset = _c[1];\n\n  var _d = React.useState(0),\n      translate = _d[0],\n      setTranslate = _d[1];\n\n  var _e = React.useState(),\n      tabFlexWith = _e[0],\n      setTabFlexWith = _e[1];\n\n  var _f = React.useState(0),\n      visibleTabs = _f[0],\n      setVisibleTabs = _f[1];\n\n  var _g = React.useState(0),\n      firstIndexInView = _g[0],\n      setFirstIndexInView = _g[1];\n\n  var _h = React.useState(1),\n      currentEvent = _h[0],\n      setCurrentEvent = _h[1];\n\n  var _j = React.useState(),\n      eventsToShow = _j[0],\n      setEventsToShow = _j[1];\n\n  var _k = React.useState(),\n      eventsOnTrack = _k[0],\n      setEventsOnTrack = _k[1];\n\n  var _l = React.useState([0, 0, 0]),\n      eventsPositions = _l[0],\n      setEventsPositions = _l[1];\n\n  var _m = React.useState(0),\n      eventsTranslate = _m[0],\n      setEventsTranslate = _m[1];\n\n  var _o = React.useState(1),\n      pivotEvent = _o[0],\n      setPivotEvent = _o[1];\n\n  var trackWrapRef = React.useRef(null);\n  var trackRef = React.useRef(null);\n  var arrowLeftRef = React.useRef(null);\n  var eventsData = props.eventsData,\n      dateFormat = props.dateFormat,\n      navigatable = props.navigatable,\n      onActionClick = props.onActionClick;\n  var tabWith = tabFlexWith ? \"\".concat(tabFlexWith, \"%\") : \"\".concat(DEFAULT_EVENT_POINT_WITH, \"px\");\n  var navigation = React.useRef(new Navigation({\n    tabIndex: 0,\n    root: trackWrapRef,\n    selectors: ['.k-timeline-scrollable-wrap']\n  }));\n  React.useEffect(function () {\n    if (trackWrapRef.current) {\n      if (props.navigatable) {\n        setTimeout(function () {\n          var firstCell = navigation.current.first;\n\n          if (firstCell) {\n            firstCell.setAttribute('tabindex', String(0));\n          }\n        }, 0);\n        navigation.current.keyboardEvents = {\n          keydown: {\n            'ArrowRight': onRight,\n            'ArrowLeft': onLeft,\n            'End': onEnd,\n            'Home': onHome\n          }\n        };\n      }\n    }\n  }, [props.navigatable, currentEvent, visibleTabs]);\n  React.useEffect(function () {\n    navigation.current.update();\n  });\n\n  var handleKeyDown = function (e) {\n    if (navigatable && navigation.current) {\n      navigation.current.triggerKeyboardEvent(e);\n    }\n  };\n\n  React.useEffect(function () {\n    var _a;\n\n    var observerResize = canUseDOM && window.ResizeObserver && new window.ResizeObserver(repositionEvents);\n    var trackList = trackRef.current;\n    var cardWith = ((_a = trackWrapRef === null || trackWrapRef === void 0 ? void 0 : trackWrapRef.current) === null || _a === void 0 ? void 0 : _a.offsetWidth) || 0;\n\n    if (observerResize && trackList) {\n      observerResize.observe(trackList);\n    }\n\n    setYearsFlags();\n    repositionEvents();\n    setEventsPositions([cardWith, 0, -cardWith]);\n    return function () {\n      observerResize && observerResize.disconnect();\n    };\n  }, []);\n  React.useEffect(function () {\n    var trackList = trackRef.current;\n    var currentTab = trackList && trackList.children[currentEvent];\n\n    if (currentTab) {\n      var tabWidth = currentTab.offsetWidth;\n      var leftArrow = !(translate >= 0);\n      setArrowLeft(leftArrow);\n\n      if (eventsOnTrack) {\n        var rightArrow = eventsOnTrack.length * tabWidth > visibleTabs * tabWidth * ((translate * -1 + 100) / 100);\n        setArrowRight(rightArrow);\n      }\n\n      if ((trackList === null || trackList === void 0 ? void 0 : trackList.offsetWidth) * -translate / 100 >= trackList.children.length * tabWidth) {\n        // TODO: on resize window reposition\n        setYearsFlags();\n        repositionEvents();\n        setTranslate((currentTab.offsetLeft - currentTab.offsetWidth) / (visibleTabs * currentTab.offsetWidth) * 100 * -1);\n      }\n\n      positionCallout(currentTab);\n    }\n  }, [visibleTabs, tabFlexWith, currentEvent]);\n\n  var onRight = function (_target, _nav, ev) {\n    if (trackRef.current) {\n      var nextChildren = trackRef.current.children[currentEvent + 1];\n      var nextPoint = nextChildren && nextChildren.classList.contains('k-timeline-flag-wrap') ? currentEvent + 2 : currentEvent + 1;\n\n      if (eventsOnTrack && eventsOnTrack.length <= nextPoint) {\n        return;\n      }\n\n      if (visibleTabs + firstIndexInView <= nextPoint) {\n        handleNextClick();\n      }\n\n      onPointClick(nextPoint, ev);\n    }\n  };\n\n  var onLeft = function (_target, _nav, ev) {\n    if (trackRef.current) {\n      var prevChildren = trackRef.current && trackRef.current.children[currentEvent - 1];\n      var prevPoint = prevChildren && prevChildren.classList.contains('k-timeline-flag-wrap') ? currentEvent - 2 : currentEvent - 1;\n\n      if (prevPoint <= 0) {\n        return;\n      }\n\n      if (prevPoint < firstIndexInView) {\n        handlePrevClick();\n      }\n\n      onPointClick(prevPoint, ev);\n    }\n  };\n\n  var onHome = function (_target, _nav, ev) {\n    if (trackRef.current) {\n      if (currentEvent <= 1) {\n        return;\n      }\n\n      var firstChild = 1;\n      var translateUpdate = 0;\n      moveView(true, firstChild, 0, translateUpdate);\n      onPointClick(firstChild, ev);\n    }\n  };\n\n  var onEnd = function (_target, _nav, ev) {\n    if (trackRef.current) {\n      var lastChild = trackRef.current && trackRef.current.children.length - 1;\n\n      if (lastChild <= currentEvent) {\n        return;\n      }\n\n      var scrollViewsCount = Math.floor(lastChild / visibleTabs);\n      var translateUpdate = scrollViewsCount * -100;\n      var firstTabToUpdate = scrollViewsCount * visibleTabs;\n      moveView(true, lastChild, firstTabToUpdate, translateUpdate);\n      onPointClick(lastChild, ev);\n    }\n  };\n\n  var setYearsFlags = function () {\n    var trackData = addYearsFlags(eventsData);\n    setEventsOnTrack(trackData);\n    setEventsToShow([trackData[currentEvent - 1], trackData[currentEvent], trackData[currentEvent + 1]]);\n  };\n\n  var handlePrevClick = function () {\n    var _a;\n\n    var trackList = trackRef.current;\n\n    if (trackList && eventsOnTrack) {\n      var firstTabToUpdate = firstIndexInView - visibleTabs;\n      var lastIndexInView = firstIndexInView - 1;\n      var currentEventToUpdate = eventsOnTrack[lastIndexInView] && ((_a = eventsOnTrack[lastIndexInView]) === null || _a === void 0 ? void 0 : _a.yearFlag) ? lastIndexInView - 1 : lastIndexInView;\n      var translateUpdate = translate + 100 > 0 ? 0 : translate + 100;\n      moveView(false, currentEventToUpdate, firstTabToUpdate, translateUpdate);\n    }\n  };\n\n  var handleNextClick = function () {\n    var trackList = trackRef.current;\n\n    if (trackList && eventsOnTrack) {\n      var firstTabToUpdate = firstIndexInView + visibleTabs;\n      var currentEventToUpdate = eventsOnTrack[firstTabToUpdate] && eventsOnTrack[firstTabToUpdate].yearFlag ? firstTabToUpdate + 1 : firstTabToUpdate;\n      var translateUpdate = translate - 100;\n      moveView(true, currentEventToUpdate, firstTabToUpdate, translateUpdate);\n    }\n  };\n\n  var moveView = function (direction, eventToUpdate, firstTab, translateToUpdate) {\n    updatePage(direction, eventToUpdate);\n    repositionEvents();\n    setFirstIndexInView(firstTab);\n    setTranslate(translateToUpdate);\n    setCurrentEvent(eventToUpdate);\n  };\n\n  var updatePage = function (forward, current) {\n    var _a;\n\n    if (eventsToShow && eventsOnTrack) {\n      var pageToUpdateIndex_1 = getPivotIndex(forward, pivotEvent);\n      var eventCardsArray_1 = Object.assign([], eventsToShow, (_a = {}, _a[pageToUpdateIndex_1] = eventsOnTrack[current], _a));\n      setEventsToShow(eventCardsArray_1);\n      setPivotEvent(pageToUpdateIndex_1);\n      setEventsTranslate(forward ? -100 : 100);\n      setTimeout(function () {\n        var _a, _b;\n\n        var _c;\n\n        var cardWith = (_c = trackWrapRef.current) === null || _c === void 0 ? void 0 : _c.offsetWidth;\n        var repositionArray = Object.assign([], eventsPositions, (_a = {}, _a[pageToUpdateIndex_1] = 0, _a[getPivotIndex(true, pageToUpdateIndex_1)] = cardWith, _a[getPivotIndex(false, pageToUpdateIndex_1)] = cardWith && -cardWith, _a));\n        var clearEventsArray = Object.assign([], eventCardsArray_1, (_b = {}, _b[getPivotIndex(true, pageToUpdateIndex_1)] = {}, _b[getPivotIndex(false, pageToUpdateIndex_1)] = {}, _b));\n        setEventsToShow(clearEventsArray);\n        setEventsPositions(repositionArray);\n        setEventsTranslate(0);\n      }, props.transitionDuration || EVENT_CARD_TRANSITION_DURATION);\n    }\n  };\n\n  var getPivotIndex = function (forward, index) {\n    var pageIndex = forward ? index + 1 : index - 1;\n\n    if (eventsToShow) {\n      var validIndex = pageIndex < 0 ? eventsToShow.length - 1 : pageIndex % eventsToShow.length;\n      return validIndex;\n    }\n\n    return 0;\n  };\n\n  var positionCallout = function (element) {\n    var _a;\n\n    var offsetToSet = (currentEvent - firstIndexInView) * element.offsetWidth + element.offsetWidth / 2 + (((_a = arrowLeftRef.current) === null || _a === void 0 ? void 0 : _a.offsetWidth) || 0);\n    setCalloutOffset(offsetToSet);\n  };\n\n  var onPointClick = function (index, event) {\n    event.preventDefault();\n\n    if (index > currentEvent) {\n      updatePage(true, index);\n    } else if (index < currentEvent) {\n      updatePage(false, index);\n    }\n\n    setCurrentEvent(index);\n  };\n\n  var repositionEvents = React.useCallback(function () {\n    var trackList = trackRef.current;\n    var currentTab = trackList && trackList.children[currentEvent];\n\n    if (trackList instanceof HTMLElement && currentTab) {\n      var visibleTabsCount = Math.round(trackList.offsetWidth / DEFAULT_EVENT_POINT_WITH);\n      positionCallout(currentTab);\n      setTabFlexWith(100 / visibleTabsCount);\n      setVisibleTabs(visibleTabsCount);\n    }\n  }, []);\n\n  var eventCardAnimationStyle = function () {\n    return {\n      transitionDuration: \"\".concat(EVENT_CARD_TRANSITION_DURATION, \"ms\")\n    };\n  };\n\n  var eventCardReorderStyle = function (translation) {\n    return {\n      transform: \"translateX(\".concat(translation, \"%)\"),\n      transformOrigin: 'left top'\n    };\n  };\n\n  return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n    className: \"k-timeline-track-wrap\",\n    ref: trackWrapRef,\n    onKeyDown: handleKeyDown\n  }, React.createElement(\"a\", {\n    ref: arrowLeftRef,\n    \"aria-hidden\": \"true\",\n    onClick: function () {\n      return arrowLeft && handlePrevClick();\n    },\n    className: classNames('k-timeline-arrow', 'k-timeline-arrow-left', 'k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button', {\n      'k-disabled': !arrowLeft\n    })\n  }, React.createElement(SvgIcon, {\n    icon: caretAltLeftIcon\n  })), React.createElement(\"a\", {\n    \"aria-hidden\": \"true\",\n    onClick: function () {\n      return arrowRight && handleNextClick();\n    },\n    className: classNames('k-timeline-arrow', 'k-timeline-arrow-right', 'k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button', {\n      'k-disabled': !arrowRight\n    })\n  }, React.createElement(SvgIcon, {\n    icon: caretAltRightIcon\n  })), React.createElement(\"div\", {\n    className: \"k-timeline-track\"\n  }, React.createElement(\"ul\", {\n    ref: trackRef,\n    className: \"k-timeline-scrollable-wrap\",\n    role: \"tablist\",\n    tabIndex: 0,\n    style: {\n      transform: \"translateX(\".concat(translate, \"%)\")\n    }\n  }, eventsOnTrack && eventsOnTrack.map(function (event, index) {\n    return event.yearFlag ? React.createElement(\"li\", {\n      role: \"none\",\n      className: \"k-timeline-track-item k-timeline-flag-wrap\",\n      style: {\n        flex: \"1 0 \".concat(tabWith)\n      },\n      key: index\n    }, React.createElement(\"span\", {\n      className: \"k-timeline-flag\"\n    }, event.yearFlag)) : React.createElement(\"li\", {\n      role: \"tab\",\n      className: classNames('k-timeline-track-item', {\n        'k-focus': index === currentEvent\n      }),\n      \"aria-selected\": index === currentEvent,\n      style: {\n        flex: \"1 0 \".concat(tabWith)\n      },\n      key: index\n    }, React.createElement(\"div\", {\n      className: \"k-timeline-date-wrap\"\n    }, React.createElement(\"span\", {\n      className: \"k-timeline-date\"\n    }, intl.formatDate(event.date, dateFormat))), React.createElement(\"span\", {\n      onClick: function (e) {\n        return onPointClick(index, e);\n      },\n      className: \"k-timeline-circle\"\n    }));\n  })))), React.createElement(\"div\", {\n    className: \"k-timeline-events-list\"\n  }, React.createElement(\"ul\", {\n    className: \"k-timeline-scrollable-wrap\",\n    style: eventsTranslate === 0 ? __assign({}, eventCardReorderStyle(eventsTranslate)) : __assign(__assign({}, eventCardReorderStyle(eventsTranslate)), eventCardAnimationStyle())\n  }, eventsToShow && eventsToShow.map(function (eventData, index) {\n    return React.createElement(\"li\", {\n      key: index,\n      className: \"k-timeline-event\",\n      style: {\n        transform: \"translate3d(\".concat(eventsPositions[index], \"px, 0px, 0px)\")\n      }\n    }, eventData && React.createElement(TimelineCard, {\n      tabindex: eventsPositions[index] === 0 ? 0 : -1,\n      eventData: eventData,\n      onActionClick: onActionClick,\n      horizontal: true,\n      collapsible: false,\n      calloutStyle: {\n        left: \"\".concat(calloutOffset, \"px\")\n      }\n    }));\n  }))));\n};\nTimelineHorizontal.propTypes = {\n  onActionClick: PropTypes.func\n};","map":{"version":3,"sources":["C:/Users/vishn/Desktop/AuthInMern/client/node_modules/@progress/kendo-react-layout/dist/es/timeline/TimelineHorizontal.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","React","PropTypes","TimelineCard","addYearsFlags","caretAltLeftIcon","caretAltRightIcon","useInternationalization","classNames","canUseDOM","SvgIcon","Navigation","TimelineHorizontal","props","DEFAULT_EVENT_POINT_WITH","EVENT_CARD_TRANSITION_DURATION","intl","_a","useState","arrowLeft","setArrowLeft","_b","arrowRight","setArrowRight","_c","calloutOffset","setCalloutOffset","_d","translate","setTranslate","_e","tabFlexWith","setTabFlexWith","_f","visibleTabs","setVisibleTabs","_g","firstIndexInView","setFirstIndexInView","_h","currentEvent","setCurrentEvent","_j","eventsToShow","setEventsToShow","_k","eventsOnTrack","setEventsOnTrack","_l","eventsPositions","setEventsPositions","_m","eventsTranslate","setEventsTranslate","_o","pivotEvent","setPivotEvent","trackWrapRef","useRef","trackRef","arrowLeftRef","eventsData","dateFormat","navigatable","onActionClick","tabWith","concat","navigation","tabIndex","root","selectors","useEffect","current","setTimeout","firstCell","first","setAttribute","String","keyboardEvents","keydown","onRight","onLeft","onEnd","onHome","update","handleKeyDown","e","triggerKeyboardEvent","observerResize","window","ResizeObserver","repositionEvents","trackList","cardWith","offsetWidth","observe","setYearsFlags","disconnect","currentTab","children","tabWidth","leftArrow","rightArrow","offsetLeft","positionCallout","_target","_nav","ev","nextChildren","nextPoint","classList","contains","handleNextClick","onPointClick","prevChildren","prevPoint","handlePrevClick","firstChild","translateUpdate","moveView","lastChild","scrollViewsCount","Math","floor","firstTabToUpdate","trackData","lastIndexInView","currentEventToUpdate","yearFlag","direction","eventToUpdate","firstTab","translateToUpdate","updatePage","forward","pageToUpdateIndex_1","getPivotIndex","eventCardsArray_1","repositionArray","clearEventsArray","transitionDuration","index","pageIndex","validIndex","element","offsetToSet","event","preventDefault","useCallback","HTMLElement","visibleTabsCount","round","eventCardAnimationStyle","eventCardReorderStyle","translation","transform","transformOrigin","createElement","Fragment","className","ref","onKeyDown","onClick","icon","role","style","map","flex","key","formatDate","date","eventData","tabindex","horizontal","collapsible","calloutStyle","left","propTypes","func"],"mappings":"AAAA,IAAIA,QAAQ,GAAI,QAAQ,KAAKA,QAAd,IAA2B,YAAY;AAClDA,EAAAA,QAAQ,GAAGC,MAAM,CAACC,MAAP,IAAiB,UAASC,CAAT,EAAY;AACpC,SAAK,IAAIC,CAAJ,EAAOC,CAAC,GAAG,CAAX,EAAcC,CAAC,GAAGC,SAAS,CAACC,MAAjC,EAAyCH,CAAC,GAAGC,CAA7C,EAAgDD,CAAC,EAAjD,EAAqD;AACjDD,MAAAA,CAAC,GAAGG,SAAS,CAACF,CAAD,CAAb;;AACA,WAAK,IAAII,CAAT,IAAcL,CAAd,EAAiB,IAAIH,MAAM,CAACS,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCR,CAArC,EAAwCK,CAAxC,CAAJ,EACbN,CAAC,CAACM,CAAD,CAAD,GAAOL,CAAC,CAACK,CAAD,CAAR;AACP;;AACD,WAAON,CAAP;AACH,GAPD;;AAQA,SAAOH,QAAQ,CAACa,KAAT,CAAe,IAAf,EAAqBN,SAArB,CAAP;AACH,CAVD;;AAWA,OAAO,KAAKO,KAAZ,MAAuB,OAAvB;AACA,OAAO,KAAKC,SAAZ,MAA2B,YAA3B;AACA,SAASC,YAAT,QAA6B,gBAA7B;AACA,SAASC,aAAT,QAA8B,SAA9B;AACA,SAASC,gBAAT,EAA2BC,iBAA3B,QAAoD,2BAApD;AACA,SAASC,uBAAT,QAAwC,4BAAxC;AACA,SAASC,UAAT,EAAqBC,SAArB,EAAgCC,OAAhC,EAAyCC,UAAzC,QAA2D,8BAA3D;AACA,OAAO,IAAIC,kBAAkB,GAAG,UAAUC,KAAV,EAAiB;AAC7C,MAAIC,wBAAwB,GAAG,GAA/B;AACA,MAAIC,8BAA8B,GAAG,GAArC;AACA,MAAIC,IAAI,GAAGT,uBAAuB,EAAlC;;AACA,MAAIU,EAAE,GAAGhB,KAAK,CAACiB,QAAN,CAAe,KAAf,CAAT;AAAA,MAAgCC,SAAS,GAAGF,EAAE,CAAC,CAAD,CAA9C;AAAA,MAAmDG,YAAY,GAAGH,EAAE,CAAC,CAAD,CAApE;;AACA,MAAII,EAAE,GAAGpB,KAAK,CAACiB,QAAN,CAAe,IAAf,CAAT;AAAA,MAA+BI,UAAU,GAAGD,EAAE,CAAC,CAAD,CAA9C;AAAA,MAAmDE,aAAa,GAAGF,EAAE,CAAC,CAAD,CAArE;;AACA,MAAIG,EAAE,GAAGvB,KAAK,CAACiB,QAAN,EAAT;AAAA,MAA2BO,aAAa,GAAGD,EAAE,CAAC,CAAD,CAA7C;AAAA,MAAkDE,gBAAgB,GAAGF,EAAE,CAAC,CAAD,CAAvE;;AACA,MAAIG,EAAE,GAAG1B,KAAK,CAACiB,QAAN,CAAe,CAAf,CAAT;AAAA,MAA4BU,SAAS,GAAGD,EAAE,CAAC,CAAD,CAA1C;AAAA,MAA+CE,YAAY,GAAGF,EAAE,CAAC,CAAD,CAAhE;;AACA,MAAIG,EAAE,GAAG7B,KAAK,CAACiB,QAAN,EAAT;AAAA,MAA2Ba,WAAW,GAAGD,EAAE,CAAC,CAAD,CAA3C;AAAA,MAAgDE,cAAc,GAAGF,EAAE,CAAC,CAAD,CAAnE;;AACA,MAAIG,EAAE,GAAGhC,KAAK,CAACiB,QAAN,CAAe,CAAf,CAAT;AAAA,MAA4BgB,WAAW,GAAGD,EAAE,CAAC,CAAD,CAA5C;AAAA,MAAiDE,cAAc,GAAGF,EAAE,CAAC,CAAD,CAApE;;AACA,MAAIG,EAAE,GAAGnC,KAAK,CAACiB,QAAN,CAAe,CAAf,CAAT;AAAA,MAA4BmB,gBAAgB,GAAGD,EAAE,CAAC,CAAD,CAAjD;AAAA,MAAsDE,mBAAmB,GAAGF,EAAE,CAAC,CAAD,CAA9E;;AACA,MAAIG,EAAE,GAAGtC,KAAK,CAACiB,QAAN,CAAe,CAAf,CAAT;AAAA,MAA4BsB,YAAY,GAAGD,EAAE,CAAC,CAAD,CAA7C;AAAA,MAAkDE,eAAe,GAAGF,EAAE,CAAC,CAAD,CAAtE;;AACA,MAAIG,EAAE,GAAGzC,KAAK,CAACiB,QAAN,EAAT;AAAA,MAA2ByB,YAAY,GAAGD,EAAE,CAAC,CAAD,CAA5C;AAAA,MAAiDE,eAAe,GAAGF,EAAE,CAAC,CAAD,CAArE;;AACA,MAAIG,EAAE,GAAG5C,KAAK,CAACiB,QAAN,EAAT;AAAA,MAA2B4B,aAAa,GAAGD,EAAE,CAAC,CAAD,CAA7C;AAAA,MAAkDE,gBAAgB,GAAGF,EAAE,CAAC,CAAD,CAAvE;;AACA,MAAIG,EAAE,GAAG/C,KAAK,CAACiB,QAAN,CAAe,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAf,CAAT;AAAA,MAAoC+B,eAAe,GAAGD,EAAE,CAAC,CAAD,CAAxD;AAAA,MAA6DE,kBAAkB,GAAGF,EAAE,CAAC,CAAD,CAApF;;AACA,MAAIG,EAAE,GAAGlD,KAAK,CAACiB,QAAN,CAAe,CAAf,CAAT;AAAA,MAA4BkC,eAAe,GAAGD,EAAE,CAAC,CAAD,CAAhD;AAAA,MAAqDE,kBAAkB,GAAGF,EAAE,CAAC,CAAD,CAA5E;;AACA,MAAIG,EAAE,GAAGrD,KAAK,CAACiB,QAAN,CAAe,CAAf,CAAT;AAAA,MAA4BqC,UAAU,GAAGD,EAAE,CAAC,CAAD,CAA3C;AAAA,MAAgDE,aAAa,GAAGF,EAAE,CAAC,CAAD,CAAlE;;AACA,MAAIG,YAAY,GAAGxD,KAAK,CAACyD,MAAN,CAAa,IAAb,CAAnB;AACA,MAAIC,QAAQ,GAAG1D,KAAK,CAACyD,MAAN,CAAa,IAAb,CAAf;AACA,MAAIE,YAAY,GAAG3D,KAAK,CAACyD,MAAN,CAAa,IAAb,CAAnB;AACA,MAAIG,UAAU,GAAGhD,KAAK,CAACgD,UAAvB;AAAA,MAAmCC,UAAU,GAAGjD,KAAK,CAACiD,UAAtD;AAAA,MAAkEC,WAAW,GAAGlD,KAAK,CAACkD,WAAtF;AAAA,MAAmGC,aAAa,GAAGnD,KAAK,CAACmD,aAAzH;AACA,MAAIC,OAAO,GAAGlC,WAAW,GAAG,GAAGmC,MAAH,CAAUnC,WAAV,EAAuB,GAAvB,CAAH,GAAiC,GAAGmC,MAAH,CAAUpD,wBAAV,EAAoC,IAApC,CAA1D;AACA,MAAIqD,UAAU,GAAGlE,KAAK,CAACyD,MAAN,CAAa,IAAI/C,UAAJ,CAAe;AACzCyD,IAAAA,QAAQ,EAAE,CAD+B;AAEzCC,IAAAA,IAAI,EAAEZ,YAFmC;AAGzCa,IAAAA,SAAS,EAAE,CAAC,6BAAD;AAH8B,GAAf,CAAb,CAAjB;AAKArE,EAAAA,KAAK,CAACsE,SAAN,CAAgB,YAAY;AACxB,QAAId,YAAY,CAACe,OAAjB,EAA0B;AACtB,UAAI3D,KAAK,CAACkD,WAAV,EAAuB;AACnBU,QAAAA,UAAU,CAAC,YAAY;AACnB,cAAIC,SAAS,GAAGP,UAAU,CAACK,OAAX,CAAmBG,KAAnC;;AACA,cAAID,SAAJ,EAAe;AACXA,YAAAA,SAAS,CAACE,YAAV,CAAuB,UAAvB,EAAmCC,MAAM,CAAC,CAAD,CAAzC;AACH;AACJ,SALS,EAKP,CALO,CAAV;AAMAV,QAAAA,UAAU,CAACK,OAAX,CAAmBM,cAAnB,GAAoC;AAChCC,UAAAA,OAAO,EAAE;AACL,0BAAcC,OADT;AAEL,yBAAaC,MAFR;AAGL,mBAAOC,KAHF;AAIL,oBAAQC;AAJH;AADuB,SAApC;AAQH;AACJ;AACJ,GAnBD,EAmBG,CAACtE,KAAK,CAACkD,WAAP,EAAoBvB,YAApB,EAAkCN,WAAlC,CAnBH;AAoBAjC,EAAAA,KAAK,CAACsE,SAAN,CAAgB,YAAY;AACxBJ,IAAAA,UAAU,CAACK,OAAX,CAAmBY,MAAnB;AACH,GAFD;;AAGA,MAAIC,aAAa,GAAG,UAAUC,CAAV,EAAa;AAC7B,QAAIvB,WAAW,IAAII,UAAU,CAACK,OAA9B,EAAuC;AACnCL,MAAAA,UAAU,CAACK,OAAX,CAAmBe,oBAAnB,CAAwCD,CAAxC;AACH;AACJ,GAJD;;AAKArF,EAAAA,KAAK,CAACsE,SAAN,CAAgB,YAAY;AACxB,QAAItD,EAAJ;;AACA,QAAIuE,cAAc,GAAG/E,SAAS,IAAIgF,MAAM,CAACC,cAApB,IAAsC,IAAID,MAAM,CAACC,cAAX,CAA0BC,gBAA1B,CAA3D;AACA,QAAIC,SAAS,GAAGjC,QAAQ,CAACa,OAAzB;AACA,QAAIqB,QAAQ,GAAG,CAAC,CAAC5E,EAAE,GAAGwC,YAAY,KAAK,IAAjB,IAAyBA,YAAY,KAAK,KAAK,CAA/C,GAAmD,KAAK,CAAxD,GAA4DA,YAAY,CAACe,OAA/E,MAA4F,IAA5F,IAAoGvD,EAAE,KAAK,KAAK,CAAhH,GAAoH,KAAK,CAAzH,GAA6HA,EAAE,CAAC6E,WAAjI,KAAiJ,CAAhK;;AACA,QAAIN,cAAc,IAAII,SAAtB,EAAiC;AAC7BJ,MAAAA,cAAc,CAACO,OAAf,CAAuBH,SAAvB;AACH;;AACDI,IAAAA,aAAa;AACbL,IAAAA,gBAAgB;AAChBzC,IAAAA,kBAAkB,CAAC,CAAC2C,QAAD,EAAW,CAAX,EAAc,CAACA,QAAf,CAAD,CAAlB;AACA,WAAO,YAAY;AACfL,MAAAA,cAAc,IAAIA,cAAc,CAACS,UAAf,EAAlB;AACH,KAFD;AAGH,GAdD,EAcG,EAdH;AAeAhG,EAAAA,KAAK,CAACsE,SAAN,CAAgB,YAAY;AACxB,QAAIqB,SAAS,GAAGjC,QAAQ,CAACa,OAAzB;AACA,QAAI0B,UAAU,GAAGN,SAAS,IAAIA,SAAS,CAACO,QAAV,CAAmB3D,YAAnB,CAA9B;;AACA,QAAI0D,UAAJ,EAAgB;AACZ,UAAIE,QAAQ,GAAGF,UAAU,CAACJ,WAA1B;AACA,UAAIO,SAAS,GAAG,EAAEzE,SAAS,IAAI,CAAf,CAAhB;AACAR,MAAAA,YAAY,CAACiF,SAAD,CAAZ;;AACA,UAAIvD,aAAJ,EAAmB;AACf,YAAIwD,UAAU,GAAGxD,aAAa,CAACnD,MAAd,GAAuByG,QAAvB,GAAmClE,WAAW,GAAGkE,QAAf,IAA4B,CAAExE,SAAS,GAAG,CAAC,CAAd,GAAmB,GAApB,IAA2B,GAAvD,CAAnD;AACAL,QAAAA,aAAa,CAAC+E,UAAD,CAAb;AACH;;AACD,UAAK,CAACV,SAAS,KAAK,IAAd,IAAsBA,SAAS,KAAK,KAAK,CAAzC,GAA6C,KAAK,CAAlD,GAAsDA,SAAS,CAACE,WAAjE,IAAgF,CAAClE,SAAlF,GAA+F,GAA/F,IAAsGgE,SAAS,CAACO,QAAV,CAAmBxG,MAAnB,GAA4ByG,QAAtI,EAAgJ;AAC5I;AACAJ,QAAAA,aAAa;AACbL,QAAAA,gBAAgB;AAChB9D,QAAAA,YAAY,CAAG,CAACqE,UAAU,CAACK,UAAX,GAAwBL,UAAU,CAACJ,WAApC,KAAoD5D,WAAW,GAAGgE,UAAU,CAACJ,WAA7E,CAAD,GAA8F,GAA/F,GAAsG,CAAC,CAAxG,CAAZ;AACH;;AACDU,MAAAA,eAAe,CAACN,UAAD,CAAf;AACH;AACJ,GAnBD,EAmBG,CAAChE,WAAD,EAAcH,WAAd,EAA2BS,YAA3B,CAnBH;;AAoBA,MAAIwC,OAAO,GAAG,UAAUyB,OAAV,EAAmBC,IAAnB,EAAyBC,EAAzB,EAA6B;AACvC,QAAIhD,QAAQ,CAACa,OAAb,EAAsB;AAClB,UAAIoC,YAAY,GAAGjD,QAAQ,CAACa,OAAT,CAAiB2B,QAAjB,CAA0B3D,YAAY,GAAG,CAAzC,CAAnB;AACA,UAAIqE,SAAS,GAAGD,YAAY,IAAIA,YAAY,CAACE,SAAb,CAAuBC,QAAvB,CAAgC,sBAAhC,CAAhB,GACVvE,YAAY,GAAG,CADL,GAEVA,YAAY,GAAG,CAFrB;;AAGA,UAAIM,aAAa,IAAIA,aAAa,CAACnD,MAAd,IAAwBkH,SAA7C,EAAwD;AACpD;AACH;;AACD,UAAK3E,WAAW,GAAGG,gBAAf,IAAoCwE,SAAxC,EAAmD;AAC/CG,QAAAA,eAAe;AAClB;;AACDC,MAAAA,YAAY,CAACJ,SAAD,EAAYF,EAAZ,CAAZ;AACH;AACJ,GAdD;;AAeA,MAAI1B,MAAM,GAAG,UAAUwB,OAAV,EAAmBC,IAAnB,EAAyBC,EAAzB,EAA6B;AACtC,QAAIhD,QAAQ,CAACa,OAAb,EAAsB;AAClB,UAAI0C,YAAY,GAAGvD,QAAQ,CAACa,OAAT,IAAoBb,QAAQ,CAACa,OAAT,CAAiB2B,QAAjB,CAA0B3D,YAAY,GAAG,CAAzC,CAAvC;AACA,UAAI2E,SAAS,GAAGD,YAAY,IAAIA,YAAY,CAACJ,SAAb,CAAuBC,QAAvB,CAAgC,sBAAhC,CAAhB,GACVvE,YAAY,GAAG,CADL,GAEVA,YAAY,GAAG,CAFrB;;AAGA,UAAI2E,SAAS,IAAI,CAAjB,EAAoB;AAChB;AACH;;AACD,UAAIA,SAAS,GAAG9E,gBAAhB,EAAkC;AAC9B+E,QAAAA,eAAe;AAClB;;AACDH,MAAAA,YAAY,CAACE,SAAD,EAAYR,EAAZ,CAAZ;AACH;AACJ,GAdD;;AAeA,MAAIxB,MAAM,GAAG,UAAUsB,OAAV,EAAmBC,IAAnB,EAAyBC,EAAzB,EAA6B;AACtC,QAAIhD,QAAQ,CAACa,OAAb,EAAsB;AAClB,UAAIhC,YAAY,IAAI,CAApB,EAAuB;AACnB;AACH;;AACD,UAAI6E,UAAU,GAAG,CAAjB;AACA,UAAIC,eAAe,GAAG,CAAtB;AACAC,MAAAA,QAAQ,CAAC,IAAD,EAAOF,UAAP,EAAmB,CAAnB,EAAsBC,eAAtB,CAAR;AACAL,MAAAA,YAAY,CAACI,UAAD,EAAaV,EAAb,CAAZ;AACH;AACJ,GAVD;;AAWA,MAAIzB,KAAK,GAAG,UAAUuB,OAAV,EAAmBC,IAAnB,EAAyBC,EAAzB,EAA6B;AACrC,QAAIhD,QAAQ,CAACa,OAAb,EAAsB;AAClB,UAAIgD,SAAS,GAAG7D,QAAQ,CAACa,OAAT,IAAoBb,QAAQ,CAACa,OAAT,CAAiB2B,QAAjB,CAA0BxG,MAA1B,GAAmC,CAAvE;;AACA,UAAI6H,SAAS,IAAIhF,YAAjB,EAA+B;AAC3B;AACH;;AACD,UAAIiF,gBAAgB,GAAGC,IAAI,CAACC,KAAL,CAAWH,SAAS,GAAGtF,WAAvB,CAAvB;AACA,UAAIoF,eAAe,GAAIG,gBAAD,GAAqB,CAAC,GAA5C;AACA,UAAIG,gBAAgB,GAAGH,gBAAgB,GAAGvF,WAA1C;AACAqF,MAAAA,QAAQ,CAAC,IAAD,EAAOC,SAAP,EAAkBI,gBAAlB,EAAoCN,eAApC,CAAR;AACAL,MAAAA,YAAY,CAACO,SAAD,EAAYb,EAAZ,CAAZ;AACH;AACJ,GAZD;;AAaA,MAAIX,aAAa,GAAG,YAAY;AAC5B,QAAI6B,SAAS,GAAGzH,aAAa,CAACyD,UAAD,CAA7B;AACAd,IAAAA,gBAAgB,CAAC8E,SAAD,CAAhB;AACAjF,IAAAA,eAAe,CAAC,CAACiF,SAAS,CAACrF,YAAY,GAAG,CAAhB,CAAV,EAA8BqF,SAAS,CAACrF,YAAD,CAAvC,EAAuDqF,SAAS,CAACrF,YAAY,GAAG,CAAhB,CAAhE,CAAD,CAAf;AACH,GAJD;;AAKA,MAAI4E,eAAe,GAAG,YAAY;AAC9B,QAAInG,EAAJ;;AACA,QAAI2E,SAAS,GAAGjC,QAAQ,CAACa,OAAzB;;AACA,QAAIoB,SAAS,IAAI9C,aAAjB,EAAgC;AAC5B,UAAI8E,gBAAgB,GAAGvF,gBAAgB,GAAGH,WAA1C;AACA,UAAI4F,eAAe,GAAGzF,gBAAgB,GAAG,CAAzC;AACA,UAAI0F,oBAAoB,GAAGjF,aAAa,CAACgF,eAAD,CAAb,KAAmC,CAAC7G,EAAE,GAAG6B,aAAa,CAACgF,eAAD,CAAnB,MAA0C,IAA1C,IAAkD7G,EAAE,KAAK,KAAK,CAA9D,GAAkE,KAAK,CAAvE,GAA2EA,EAAE,CAAC+G,QAAjH,IACrBF,eAAe,GAAG,CADG,GAErBA,eAFN;AAGA,UAAIR,eAAe,GAAG1F,SAAS,GAAG,GAAZ,GAAkB,CAAlB,GAAsB,CAAtB,GAA0BA,SAAS,GAAG,GAA5D;AACA2F,MAAAA,QAAQ,CAAC,KAAD,EAAQQ,oBAAR,EAA8BH,gBAA9B,EAAgDN,eAAhD,CAAR;AACH;AACJ,GAZD;;AAaA,MAAIN,eAAe,GAAG,YAAY;AAC9B,QAAIpB,SAAS,GAAGjC,QAAQ,CAACa,OAAzB;;AACA,QAAIoB,SAAS,IAAI9C,aAAjB,EAAgC;AAC5B,UAAI8E,gBAAgB,GAAGvF,gBAAgB,GAAGH,WAA1C;AACA,UAAI6F,oBAAoB,GAAGjF,aAAa,CAAC8E,gBAAD,CAAb,IAAmC9E,aAAa,CAAC8E,gBAAD,CAAb,CAAgCI,QAAnE,GACrBJ,gBAAgB,GAAG,CADE,GAErBA,gBAFN;AAGA,UAAIN,eAAe,GAAG1F,SAAS,GAAG,GAAlC;AACA2F,MAAAA,QAAQ,CAAC,IAAD,EAAOQ,oBAAP,EAA6BH,gBAA7B,EAA+CN,eAA/C,CAAR;AACH;AACJ,GAVD;;AAWA,MAAIC,QAAQ,GAAG,UAAUU,SAAV,EAAqBC,aAArB,EAAoCC,QAApC,EAA8CC,iBAA9C,EAAiE;AAC5EC,IAAAA,UAAU,CAACJ,SAAD,EAAYC,aAAZ,CAAV;AACAvC,IAAAA,gBAAgB;AAChBrD,IAAAA,mBAAmB,CAAC6F,QAAD,CAAnB;AACAtG,IAAAA,YAAY,CAACuG,iBAAD,CAAZ;AACA3F,IAAAA,eAAe,CAACyF,aAAD,CAAf;AACH,GAND;;AAOA,MAAIG,UAAU,GAAG,UAAUC,OAAV,EAAmB9D,OAAnB,EAA4B;AACzC,QAAIvD,EAAJ;;AACA,QAAI0B,YAAY,IAAIG,aAApB,EAAmC;AAC/B,UAAIyF,mBAAmB,GAAGC,aAAa,CAACF,OAAD,EAAU/E,UAAV,CAAvC;AACA,UAAIkF,iBAAiB,GAAGrJ,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBsD,YAAlB,GAAiC1B,EAAE,GAAG,EAAL,EAASA,EAAE,CAACsH,mBAAD,CAAF,GAA0BzF,aAAa,CAAC0B,OAAD,CAAhD,EAA2DvD,EAA5F,EAAxB;AACA2B,MAAAA,eAAe,CAAC6F,iBAAD,CAAf;AACAjF,MAAAA,aAAa,CAAC+E,mBAAD,CAAb;AACAlF,MAAAA,kBAAkB,CAACiF,OAAO,GAAG,CAAC,GAAJ,GAAU,GAAlB,CAAlB;AACA7D,MAAAA,UAAU,CAAC,YAAY;AACnB,YAAIxD,EAAJ,EAAQI,EAAR;;AACA,YAAIG,EAAJ;;AACA,YAAIqE,QAAQ,GAAG,CAACrE,EAAE,GAAGiC,YAAY,CAACe,OAAnB,MAAgC,IAAhC,IAAwChD,EAAE,KAAK,KAAK,CAApD,GAAwD,KAAK,CAA7D,GAAiEA,EAAE,CAACsE,WAAnF;AACA,YAAI4C,eAAe,GAAGtJ,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB4D,eAAlB,GAAoChC,EAAE,GAAG,EAAL,EACtDA,EAAE,CAACsH,mBAAD,CAAF,GAA0B,CAD4B,EAEtDtH,EAAE,CAACuH,aAAa,CAAC,IAAD,EAAOD,mBAAP,CAAd,CAAF,GAA+C1C,QAFO,EAGtD5E,EAAE,CAACuH,aAAa,CAAC,KAAD,EAAQD,mBAAR,CAAd,CAAF,GAAgD1C,QAAQ,IAAI,CAACA,QAHP,EAItD5E,EAJkB,EAAtB;AAKA,YAAI0H,gBAAgB,GAAGvJ,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBoJ,iBAAlB,GAAsCpH,EAAE,GAAG,EAAL,EACzDA,EAAE,CAACmH,aAAa,CAAC,IAAD,EAAOD,mBAAP,CAAd,CAAF,GAA+C,EADU,EAEzDlH,EAAE,CAACmH,aAAa,CAAC,KAAD,EAAQD,mBAAR,CAAd,CAAF,GAAgD,EAFS,EAGzDlH,EAHmB,EAAvB;AAIAuB,QAAAA,eAAe,CAAC+F,gBAAD,CAAf;AACAzF,QAAAA,kBAAkB,CAACwF,eAAD,CAAlB;AACArF,QAAAA,kBAAkB,CAAC,CAAD,CAAlB;AACH,OAhBS,EAgBPxC,KAAK,CAAC+H,kBAAN,IAA4B7H,8BAhBrB,CAAV;AAiBH;AACJ,GA1BD;;AA2BA,MAAIyH,aAAa,GAAG,UAAUF,OAAV,EAAmBO,KAAnB,EAA0B;AAC1C,QAAIC,SAAS,GAAGR,OAAO,GAAGO,KAAK,GAAG,CAAX,GAAeA,KAAK,GAAG,CAA9C;;AACA,QAAIlG,YAAJ,EAAkB;AACd,UAAIoG,UAAU,GAAGD,SAAS,GAAG,CAAZ,GACXnG,YAAY,CAAChD,MAAb,GAAsB,CADX,GAEXmJ,SAAS,GAAGnG,YAAY,CAAChD,MAF/B;AAGA,aAAOoJ,UAAP;AACH;;AACD,WAAO,CAAP;AACH,GATD;;AAUA,MAAIvC,eAAe,GAAG,UAAUwC,OAAV,EAAmB;AACrC,QAAI/H,EAAJ;;AACA,QAAIgI,WAAW,GAAI,CAACzG,YAAY,GAAGH,gBAAhB,IAAoC2G,OAAO,CAAClD,WAA7C,GACbkD,OAAO,CAAClD,WAAR,GAAsB,CADT,IAEb,CAAC,CAAC7E,EAAE,GAAG2C,YAAY,CAACY,OAAnB,MAAgC,IAAhC,IAAwCvD,EAAE,KAAK,KAAK,CAApD,GAAwD,KAAK,CAA7D,GAAiEA,EAAE,CAAC6E,WAArE,KAAqF,CAFxE,CAAlB;AAGApE,IAAAA,gBAAgB,CAACuH,WAAD,CAAhB;AACH,GAND;;AAOA,MAAIhC,YAAY,GAAG,UAAU4B,KAAV,EAAiBK,KAAjB,EAAwB;AACvCA,IAAAA,KAAK,CAACC,cAAN;;AACA,QAAIN,KAAK,GAAGrG,YAAZ,EAA0B;AACtB6F,MAAAA,UAAU,CAAC,IAAD,EAAOQ,KAAP,CAAV;AACH,KAFD,MAGK,IAAIA,KAAK,GAAGrG,YAAZ,EAA0B;AAC3B6F,MAAAA,UAAU,CAAC,KAAD,EAAQQ,KAAR,CAAV;AACH;;AACDpG,IAAAA,eAAe,CAACoG,KAAD,CAAf;AACH,GATD;;AAUA,MAAIlD,gBAAgB,GAAG1F,KAAK,CAACmJ,WAAN,CAAkB,YAAY;AACjD,QAAIxD,SAAS,GAAGjC,QAAQ,CAACa,OAAzB;AACA,QAAI0B,UAAU,GAAGN,SAAS,IAAIA,SAAS,CAACO,QAAV,CAAmB3D,YAAnB,CAA9B;;AACA,QAAIoD,SAAS,YAAYyD,WAArB,IAAoCnD,UAAxC,EAAoD;AAChD,UAAIoD,gBAAgB,GAAG5B,IAAI,CAAC6B,KAAL,CAAW3D,SAAS,CAACE,WAAV,GAAwBhF,wBAAnC,CAAvB;AACA0F,MAAAA,eAAe,CAACN,UAAD,CAAf;AACAlE,MAAAA,cAAc,CAAC,MAAMsH,gBAAP,CAAd;AACAnH,MAAAA,cAAc,CAACmH,gBAAD,CAAd;AACH;AACJ,GATsB,EASpB,EAToB,CAAvB;;AAUA,MAAIE,uBAAuB,GAAG,YAAY;AAAE,WAAQ;AAChDZ,MAAAA,kBAAkB,EAAE,GAAG1E,MAAH,CAAUnD,8BAAV,EAA0C,IAA1C;AAD4B,KAAR;AAEvC,GAFL;;AAGA,MAAI0I,qBAAqB,GAAG,UAAUC,WAAV,EAAuB;AAAE,WAAQ;AACzDC,MAAAA,SAAS,EAAE,cAAczF,MAAd,CAAqBwF,WAArB,EAAkC,IAAlC,CAD8C;AACLE,MAAAA,eAAe,EAAE;AADZ,KAAR;AAEhD,GAFL;;AAGA,SAAQ3J,KAAK,CAAC4J,aAAN,CAAoB5J,KAAK,CAAC6J,QAA1B,EAAoC,IAApC,EACJ7J,KAAK,CAAC4J,aAAN,CAAoB,KAApB,EAA2B;AAAEE,IAAAA,SAAS,EAAE,uBAAb;AAAsCC,IAAAA,GAAG,EAAEvG,YAA3C;AAAyDwG,IAAAA,SAAS,EAAE5E;AAApE,GAA3B,EACIpF,KAAK,CAAC4J,aAAN,CAAoB,GAApB,EAAyB;AAAEG,IAAAA,GAAG,EAAEpG,YAAP;AAAqB,mBAAe,MAApC;AAA4CsG,IAAAA,OAAO,EAAE,YAAY;AAAE,aAAO/I,SAAS,IAAIiG,eAAe,EAAnC;AAAwC,KAA3G;AAA6G2C,IAAAA,SAAS,EAAEvJ,UAAU,CAAC,kBAAD,EAAqB,uBAArB,EAA8C,oFAA9C,EAAoI;AAAE,oBAAc,CAACW;AAAjB,KAApI;AAAlI,GAAzB,EACIlB,KAAK,CAAC4J,aAAN,CAAoBnJ,OAApB,EAA6B;AAAEyJ,IAAAA,IAAI,EAAE9J;AAAR,GAA7B,CADJ,CADJ,EAGIJ,KAAK,CAAC4J,aAAN,CAAoB,GAApB,EAAyB;AAAE,mBAAe,MAAjB;AAAyBK,IAAAA,OAAO,EAAE,YAAY;AAAE,aAAO5I,UAAU,IAAI0F,eAAe,EAApC;AAAyC,KAAzF;AAA2F+C,IAAAA,SAAS,EAAEvJ,UAAU,CAAC,kBAAD,EAAqB,wBAArB,EAA+C,oFAA/C,EAAqI;AAAE,oBAAc,CAACc;AAAjB,KAArI;AAAhH,GAAzB,EACIrB,KAAK,CAAC4J,aAAN,CAAoBnJ,OAApB,EAA6B;AAAEyJ,IAAAA,IAAI,EAAE7J;AAAR,GAA7B,CADJ,CAHJ,EAKIL,KAAK,CAAC4J,aAAN,CAAoB,KAApB,EAA2B;AAAEE,IAAAA,SAAS,EAAE;AAAb,GAA3B,EACI9J,KAAK,CAAC4J,aAAN,CAAoB,IAApB,EAA0B;AAAEG,IAAAA,GAAG,EAAErG,QAAP;AAAiBoG,IAAAA,SAAS,EAAE,4BAA5B;AAA0DK,IAAAA,IAAI,EAAE,SAAhE;AAA2EhG,IAAAA,QAAQ,EAAE,CAArF;AAAwFiG,IAAAA,KAAK,EAAE;AAAEV,MAAAA,SAAS,EAAE,cAAczF,MAAd,CAAqBtC,SAArB,EAAgC,IAAhC;AAAb;AAA/F,GAA1B,EAAiLkB,aAAa,IAAIA,aAAa,CAACwH,GAAd,CAAkB,UAAUpB,KAAV,EAAiBL,KAAjB,EAAwB;AAAE,WAAQK,KAAK,CAAClB,QAAN,GAC/O/H,KAAK,CAAC4J,aAAN,CAAoB,IAApB,EAA0B;AAAEO,MAAAA,IAAI,EAAE,MAAR;AAAgBL,MAAAA,SAAS,EAAE,4CAA3B;AAAyEM,MAAAA,KAAK,EAAE;AAAEE,QAAAA,IAAI,EAAE,OAAOrG,MAAP,CAAcD,OAAd;AAAR,OAAhF;AAAkHuG,MAAAA,GAAG,EAAE3B;AAAvH,KAA1B,EACC5I,KAAK,CAAC4J,aAAN,CAAoB,MAApB,EAA4B;AAAEE,MAAAA,SAAS,EAAE;AAAb,KAA5B,EAA8Db,KAAK,CAAClB,QAApE,CADD,CAD+O,GAG/O/H,KAAK,CAAC4J,aAAN,CAAoB,IAApB,EAA0B;AAAEO,MAAAA,IAAI,EAAE,KAAR;AAAeL,MAAAA,SAAS,EAAEvJ,UAAU,CAAC,uBAAD,EAA0B;AAAE,mBAAWqI,KAAK,KAAKrG;AAAvB,OAA1B,CAApC;AAAsG,uBAAiBqG,KAAK,KAAKrG,YAAjI;AAA+I6H,MAAAA,KAAK,EAAE;AAAEE,QAAAA,IAAI,EAAE,OAAOrG,MAAP,CAAcD,OAAd;AAAR,OAAtJ;AAAwLuG,MAAAA,GAAG,EAAE3B;AAA7L,KAA1B,EACC5I,KAAK,CAAC4J,aAAN,CAAoB,KAApB,EAA2B;AAAEE,MAAAA,SAAS,EAAE;AAAb,KAA3B,EACI9J,KAAK,CAAC4J,aAAN,CAAoB,MAApB,EAA4B;AAAEE,MAAAA,SAAS,EAAE;AAAb,KAA5B,EAA8D/I,IAAI,CAACyJ,UAAL,CAAgBvB,KAAK,CAACwB,IAAtB,EAA4B5G,UAA5B,CAA9D,CADJ,CADD,EAGC7D,KAAK,CAAC4J,aAAN,CAAoB,MAApB,EAA4B;AAAEK,MAAAA,OAAO,EAAE,UAAU5E,CAAV,EAAa;AAAE,eAAO2B,YAAY,CAAC4B,KAAD,EAAQvD,CAAR,CAAnB;AAAgC,OAA1D;AAA4DyE,MAAAA,SAAS,EAAE;AAAvE,KAA5B,CAHD,CAHuO;AAMvG,GAN2D,CAAlM,CADJ,CALJ,CADI,EAcJ9J,KAAK,CAAC4J,aAAN,CAAoB,KAApB,EAA2B;AAAEE,IAAAA,SAAS,EAAE;AAAb,GAA3B,EACI9J,KAAK,CAAC4J,aAAN,CAAoB,IAApB,EAA0B;AAAEE,IAAAA,SAAS,EAAE,4BAAb;AAA2CM,IAAAA,KAAK,EAAEjH,eAAe,KAAK,CAApB,GAClEjE,QAAQ,CAAC,EAAD,EAAKsK,qBAAqB,CAACrG,eAAD,CAA1B,CAD0D,GACXjE,QAAQ,CAACA,QAAQ,CAAC,EAAD,EAAKsK,qBAAqB,CAACrG,eAAD,CAA1B,CAAT,EAAuDoG,uBAAuB,EAA9E;AAD/C,GAA1B,EAC8J7G,YAAY,IAAIA,YAAY,CAAC2H,GAAb,CAAiB,UAAUK,SAAV,EAAqB9B,KAArB,EAA4B;AACvN,WAAQ5I,KAAK,CAAC4J,aAAN,CAAoB,IAApB,EAA0B;AAAEW,MAAAA,GAAG,EAAE3B,KAAP;AAAckB,MAAAA,SAAS,EAAE,kBAAzB;AAA6CM,MAAAA,KAAK,EAAE;AAAEV,QAAAA,SAAS,EAAE,eAAezF,MAAf,CAAsBjB,eAAe,CAAC4F,KAAD,CAArC,EAA8C,eAA9C;AAAb;AAApD,KAA1B,EAA+J8B,SAAS,IAAI1K,KAAK,CAAC4J,aAAN,CAAoB1J,YAApB,EAAkC;AAAEyK,MAAAA,QAAQ,EAAE3H,eAAe,CAAC4F,KAAD,CAAf,KAA2B,CAA3B,GAA+B,CAA/B,GAAmC,CAAC,CAAhD;AAAmD8B,MAAAA,SAAS,EAAEA,SAA9D;AAAyE3G,MAAAA,aAAa,EAAEA,aAAxF;AAAuG6G,MAAAA,UAAU,EAAE,IAAnH;AAAyHC,MAAAA,WAAW,EAAE,KAAtI;AAA6IC,MAAAA,YAAY,EAAE;AAAEC,QAAAA,IAAI,EAAE,GAAG9G,MAAH,CAAUzC,aAAV,EAAyB,IAAzB;AAAR;AAA3J,KAAlC,CAA5K,CAAR;AACH,GAF6K,CAD9K,CADJ,CAdI,CAAR;AAmBH,CA7QM;AA8QPb,kBAAkB,CAACqK,SAAnB,GAA+B;AAC3BjH,EAAAA,aAAa,EAAE9D,SAAS,CAACgL;AADE,CAA/B","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { TimelineCard } from './TimelineCard';\nimport { addYearsFlags } from './utils';\nimport { caretAltLeftIcon, caretAltRightIcon } from '@progress/kendo-svg-icons';\nimport { useInternationalization } from '@progress/kendo-react-intl';\nimport { classNames, canUseDOM, SvgIcon, Navigation } from '@progress/kendo-react-common';\nexport var TimelineHorizontal = function (props) {\n    var DEFAULT_EVENT_POINT_WITH = 150;\n    var EVENT_CARD_TRANSITION_DURATION = 300;\n    var intl = useInternationalization();\n    var _a = React.useState(false), arrowLeft = _a[0], setArrowLeft = _a[1];\n    var _b = React.useState(true), arrowRight = _b[0], setArrowRight = _b[1];\n    var _c = React.useState(), calloutOffset = _c[0], setCalloutOffset = _c[1];\n    var _d = React.useState(0), translate = _d[0], setTranslate = _d[1];\n    var _e = React.useState(), tabFlexWith = _e[0], setTabFlexWith = _e[1];\n    var _f = React.useState(0), visibleTabs = _f[0], setVisibleTabs = _f[1];\n    var _g = React.useState(0), firstIndexInView = _g[0], setFirstIndexInView = _g[1];\n    var _h = React.useState(1), currentEvent = _h[0], setCurrentEvent = _h[1];\n    var _j = React.useState(), eventsToShow = _j[0], setEventsToShow = _j[1];\n    var _k = React.useState(), eventsOnTrack = _k[0], setEventsOnTrack = _k[1];\n    var _l = React.useState([0, 0, 0]), eventsPositions = _l[0], setEventsPositions = _l[1];\n    var _m = React.useState(0), eventsTranslate = _m[0], setEventsTranslate = _m[1];\n    var _o = React.useState(1), pivotEvent = _o[0], setPivotEvent = _o[1];\n    var trackWrapRef = React.useRef(null);\n    var trackRef = React.useRef(null);\n    var arrowLeftRef = React.useRef(null);\n    var eventsData = props.eventsData, dateFormat = props.dateFormat, navigatable = props.navigatable, onActionClick = props.onActionClick;\n    var tabWith = tabFlexWith ? \"\".concat(tabFlexWith, \"%\") : \"\".concat(DEFAULT_EVENT_POINT_WITH, \"px\");\n    var navigation = React.useRef(new Navigation({\n        tabIndex: 0,\n        root: trackWrapRef,\n        selectors: ['.k-timeline-scrollable-wrap']\n    }));\n    React.useEffect(function () {\n        if (trackWrapRef.current) {\n            if (props.navigatable) {\n                setTimeout(function () {\n                    var firstCell = navigation.current.first;\n                    if (firstCell) {\n                        firstCell.setAttribute('tabindex', String(0));\n                    }\n                }, 0);\n                navigation.current.keyboardEvents = {\n                    keydown: {\n                        'ArrowRight': onRight,\n                        'ArrowLeft': onLeft,\n                        'End': onEnd,\n                        'Home': onHome\n                    }\n                };\n            }\n        }\n    }, [props.navigatable, currentEvent, visibleTabs]);\n    React.useEffect(function () {\n        navigation.current.update();\n    });\n    var handleKeyDown = function (e) {\n        if (navigatable && navigation.current) {\n            navigation.current.triggerKeyboardEvent(e);\n        }\n    };\n    React.useEffect(function () {\n        var _a;\n        var observerResize = canUseDOM && window.ResizeObserver && new window.ResizeObserver(repositionEvents);\n        var trackList = trackRef.current;\n        var cardWith = ((_a = trackWrapRef === null || trackWrapRef === void 0 ? void 0 : trackWrapRef.current) === null || _a === void 0 ? void 0 : _a.offsetWidth) || 0;\n        if (observerResize && trackList) {\n            observerResize.observe(trackList);\n        }\n        setYearsFlags();\n        repositionEvents();\n        setEventsPositions([cardWith, 0, -cardWith]);\n        return function () {\n            observerResize && observerResize.disconnect();\n        };\n    }, []);\n    React.useEffect(function () {\n        var trackList = trackRef.current;\n        var currentTab = trackList && trackList.children[currentEvent];\n        if (currentTab) {\n            var tabWidth = currentTab.offsetWidth;\n            var leftArrow = !(translate >= 0);\n            setArrowLeft(leftArrow);\n            if (eventsOnTrack) {\n                var rightArrow = eventsOnTrack.length * tabWidth > (visibleTabs * tabWidth) * (((translate * -1) + 100) / 100);\n                setArrowRight(rightArrow);\n            }\n            if (((trackList === null || trackList === void 0 ? void 0 : trackList.offsetWidth) * -translate) / 100 >= trackList.children.length * tabWidth) {\n                // TODO: on resize window reposition\n                setYearsFlags();\n                repositionEvents();\n                setTranslate((((currentTab.offsetLeft - currentTab.offsetWidth) / (visibleTabs * currentTab.offsetWidth)) * 100) * -1);\n            }\n            positionCallout(currentTab);\n        }\n    }, [visibleTabs, tabFlexWith, currentEvent]);\n    var onRight = function (_target, _nav, ev) {\n        if (trackRef.current) {\n            var nextChildren = trackRef.current.children[currentEvent + 1];\n            var nextPoint = nextChildren && nextChildren.classList.contains('k-timeline-flag-wrap')\n                ? currentEvent + 2\n                : currentEvent + 1;\n            if (eventsOnTrack && eventsOnTrack.length <= nextPoint) {\n                return;\n            }\n            if ((visibleTabs + firstIndexInView) <= nextPoint) {\n                handleNextClick();\n            }\n            onPointClick(nextPoint, ev);\n        }\n    };\n    var onLeft = function (_target, _nav, ev) {\n        if (trackRef.current) {\n            var prevChildren = trackRef.current && trackRef.current.children[currentEvent - 1];\n            var prevPoint = prevChildren && prevChildren.classList.contains('k-timeline-flag-wrap')\n                ? currentEvent - 2\n                : currentEvent - 1;\n            if (prevPoint <= 0) {\n                return;\n            }\n            if (prevPoint < firstIndexInView) {\n                handlePrevClick();\n            }\n            onPointClick(prevPoint, ev);\n        }\n    };\n    var onHome = function (_target, _nav, ev) {\n        if (trackRef.current) {\n            if (currentEvent <= 1) {\n                return;\n            }\n            var firstChild = 1;\n            var translateUpdate = 0;\n            moveView(true, firstChild, 0, translateUpdate);\n            onPointClick(firstChild, ev);\n        }\n    };\n    var onEnd = function (_target, _nav, ev) {\n        if (trackRef.current) {\n            var lastChild = trackRef.current && trackRef.current.children.length - 1;\n            if (lastChild <= currentEvent) {\n                return;\n            }\n            var scrollViewsCount = Math.floor(lastChild / visibleTabs);\n            var translateUpdate = (scrollViewsCount) * -100;\n            var firstTabToUpdate = scrollViewsCount * visibleTabs;\n            moveView(true, lastChild, firstTabToUpdate, translateUpdate);\n            onPointClick(lastChild, ev);\n        }\n    };\n    var setYearsFlags = function () {\n        var trackData = addYearsFlags(eventsData);\n        setEventsOnTrack(trackData);\n        setEventsToShow([trackData[currentEvent - 1], trackData[currentEvent], trackData[currentEvent + 1]]);\n    };\n    var handlePrevClick = function () {\n        var _a;\n        var trackList = trackRef.current;\n        if (trackList && eventsOnTrack) {\n            var firstTabToUpdate = firstIndexInView - visibleTabs;\n            var lastIndexInView = firstIndexInView - 1;\n            var currentEventToUpdate = eventsOnTrack[lastIndexInView] && ((_a = eventsOnTrack[lastIndexInView]) === null || _a === void 0 ? void 0 : _a.yearFlag)\n                ? lastIndexInView - 1\n                : lastIndexInView;\n            var translateUpdate = translate + 100 > 0 ? 0 : translate + 100;\n            moveView(false, currentEventToUpdate, firstTabToUpdate, translateUpdate);\n        }\n    };\n    var handleNextClick = function () {\n        var trackList = trackRef.current;\n        if (trackList && eventsOnTrack) {\n            var firstTabToUpdate = firstIndexInView + visibleTabs;\n            var currentEventToUpdate = eventsOnTrack[firstTabToUpdate] && eventsOnTrack[firstTabToUpdate].yearFlag\n                ? firstTabToUpdate + 1\n                : firstTabToUpdate;\n            var translateUpdate = translate - 100;\n            moveView(true, currentEventToUpdate, firstTabToUpdate, translateUpdate);\n        }\n    };\n    var moveView = function (direction, eventToUpdate, firstTab, translateToUpdate) {\n        updatePage(direction, eventToUpdate);\n        repositionEvents();\n        setFirstIndexInView(firstTab);\n        setTranslate(translateToUpdate);\n        setCurrentEvent(eventToUpdate);\n    };\n    var updatePage = function (forward, current) {\n        var _a;\n        if (eventsToShow && eventsOnTrack) {\n            var pageToUpdateIndex_1 = getPivotIndex(forward, pivotEvent);\n            var eventCardsArray_1 = Object.assign([], eventsToShow, (_a = {}, _a[pageToUpdateIndex_1] = eventsOnTrack[current], _a));\n            setEventsToShow(eventCardsArray_1);\n            setPivotEvent(pageToUpdateIndex_1);\n            setEventsTranslate(forward ? -100 : 100);\n            setTimeout(function () {\n                var _a, _b;\n                var _c;\n                var cardWith = (_c = trackWrapRef.current) === null || _c === void 0 ? void 0 : _c.offsetWidth;\n                var repositionArray = Object.assign([], eventsPositions, (_a = {},\n                    _a[pageToUpdateIndex_1] = 0,\n                    _a[getPivotIndex(true, pageToUpdateIndex_1)] = cardWith,\n                    _a[getPivotIndex(false, pageToUpdateIndex_1)] = cardWith && -cardWith,\n                    _a));\n                var clearEventsArray = Object.assign([], eventCardsArray_1, (_b = {},\n                    _b[getPivotIndex(true, pageToUpdateIndex_1)] = {},\n                    _b[getPivotIndex(false, pageToUpdateIndex_1)] = {},\n                    _b));\n                setEventsToShow(clearEventsArray);\n                setEventsPositions(repositionArray);\n                setEventsTranslate(0);\n            }, props.transitionDuration || EVENT_CARD_TRANSITION_DURATION);\n        }\n    };\n    var getPivotIndex = function (forward, index) {\n        var pageIndex = forward ? index + 1 : index - 1;\n        if (eventsToShow) {\n            var validIndex = pageIndex < 0\n                ? eventsToShow.length - 1\n                : pageIndex % eventsToShow.length;\n            return validIndex;\n        }\n        return 0;\n    };\n    var positionCallout = function (element) {\n        var _a;\n        var offsetToSet = ((currentEvent - firstIndexInView) * element.offsetWidth) +\n            (element.offsetWidth / 2) +\n            (((_a = arrowLeftRef.current) === null || _a === void 0 ? void 0 : _a.offsetWidth) || 0);\n        setCalloutOffset(offsetToSet);\n    };\n    var onPointClick = function (index, event) {\n        event.preventDefault();\n        if (index > currentEvent) {\n            updatePage(true, index);\n        }\n        else if (index < currentEvent) {\n            updatePage(false, index);\n        }\n        setCurrentEvent(index);\n    };\n    var repositionEvents = React.useCallback(function () {\n        var trackList = trackRef.current;\n        var currentTab = trackList && trackList.children[currentEvent];\n        if (trackList instanceof HTMLElement && currentTab) {\n            var visibleTabsCount = Math.round(trackList.offsetWidth / DEFAULT_EVENT_POINT_WITH);\n            positionCallout(currentTab);\n            setTabFlexWith(100 / visibleTabsCount);\n            setVisibleTabs(visibleTabsCount);\n        }\n    }, []);\n    var eventCardAnimationStyle = function () { return ({\n        transitionDuration: \"\".concat(EVENT_CARD_TRANSITION_DURATION, \"ms\")\n    }); };\n    var eventCardReorderStyle = function (translation) { return ({\n        transform: \"translateX(\".concat(translation, \"%)\"), transformOrigin: 'left top'\n    }); };\n    return (React.createElement(React.Fragment, null,\n        React.createElement(\"div\", { className: \"k-timeline-track-wrap\", ref: trackWrapRef, onKeyDown: handleKeyDown },\n            React.createElement(\"a\", { ref: arrowLeftRef, \"aria-hidden\": \"true\", onClick: function () { return arrowLeft && handlePrevClick(); }, className: classNames('k-timeline-arrow', 'k-timeline-arrow-left', 'k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button', { 'k-disabled': !arrowLeft }) },\n                React.createElement(SvgIcon, { icon: caretAltLeftIcon })),\n            React.createElement(\"a\", { \"aria-hidden\": \"true\", onClick: function () { return arrowRight && handleNextClick(); }, className: classNames('k-timeline-arrow', 'k-timeline-arrow-right', 'k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button', { 'k-disabled': !arrowRight }) },\n                React.createElement(SvgIcon, { icon: caretAltRightIcon })),\n            React.createElement(\"div\", { className: \"k-timeline-track\" },\n                React.createElement(\"ul\", { ref: trackRef, className: \"k-timeline-scrollable-wrap\", role: \"tablist\", tabIndex: 0, style: { transform: \"translateX(\".concat(translate, \"%)\") } }, eventsOnTrack && eventsOnTrack.map(function (event, index) { return (event.yearFlag\n                    ? (React.createElement(\"li\", { role: \"none\", className: \"k-timeline-track-item k-timeline-flag-wrap\", style: { flex: \"1 0 \".concat(tabWith) }, key: index },\n                        React.createElement(\"span\", { className: \"k-timeline-flag\" }, event.yearFlag)))\n                    : (React.createElement(\"li\", { role: \"tab\", className: classNames('k-timeline-track-item', { 'k-focus': index === currentEvent }), \"aria-selected\": index === currentEvent, style: { flex: \"1 0 \".concat(tabWith) }, key: index },\n                        React.createElement(\"div\", { className: \"k-timeline-date-wrap\" },\n                            React.createElement(\"span\", { className: \"k-timeline-date\" }, intl.formatDate(event.date, dateFormat))),\n                        React.createElement(\"span\", { onClick: function (e) { return onPointClick(index, e); }, className: \"k-timeline-circle\" })))); })))),\n        React.createElement(\"div\", { className: \"k-timeline-events-list\" },\n            React.createElement(\"ul\", { className: \"k-timeline-scrollable-wrap\", style: eventsTranslate === 0\n                    ? __assign({}, eventCardReorderStyle(eventsTranslate)) : __assign(__assign({}, eventCardReorderStyle(eventsTranslate)), eventCardAnimationStyle()) }, eventsToShow && eventsToShow.map(function (eventData, index) {\n                return (React.createElement(\"li\", { key: index, className: \"k-timeline-event\", style: { transform: \"translate3d(\".concat(eventsPositions[index], \"px, 0px, 0px)\") } }, eventData && React.createElement(TimelineCard, { tabindex: eventsPositions[index] === 0 ? 0 : -1, eventData: eventData, onActionClick: onActionClick, horizontal: true, collapsible: false, calloutStyle: { left: \"\".concat(calloutOffset, \"px\") } })));\n            })))));\n};\nTimelineHorizontal.propTypes = {\n    onActionClick: PropTypes.func\n};\n"]},"metadata":{},"sourceType":"module"}