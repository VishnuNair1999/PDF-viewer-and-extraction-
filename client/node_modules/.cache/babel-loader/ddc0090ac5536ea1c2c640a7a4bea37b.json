{"ast":null,"code":"import { isAuthor } from './utils';\n\nvar last = function (arr) {\n  return arr[arr.length - 1];\n};\n\nvar dateChanged = function (curr, prev) {\n  return curr && prev && (prev.getDate() !== curr.getDate() || prev.getMonth() !== curr.getMonth() || prev.getFullYear() !== curr.getFullYear());\n};\n\nvar addDateMarker = function (acc, msg) {\n  var timestamp = msg.timestamp;\n  var lastItem = last(acc);\n\n  if (!timestamp) {\n    return;\n  }\n\n  if (!lastItem || dateChanged(timestamp, lastItem.timestamp)) {\n    var dateMarker = {\n      type: 'date-marker',\n      timestamp: timestamp,\n      trackBy: timestamp.getTime()\n    };\n    acc.push(dateMarker);\n  }\n};\n\nvar groupMessages = function (acc, msg, isLastMessage) {\n  var lastItem = last(acc);\n  var messages = undefined;\n\n  if (msg.typing && !isLastMessage) {\n    return;\n  }\n\n  if (lastItem && lastItem.type === 'message-group') {\n    messages = lastItem.messages;\n  }\n\n  if (messages && isAuthor(msg.author, last(messages))) {\n    messages.push(msg);\n  } else {\n    acc.push({\n      type: 'message-group',\n      messages: [msg],\n      author: msg.author,\n      timestamp: msg.timestamp,\n      trackBy: msg\n    });\n  }\n};\n\nvar groupItems = function (total) {\n  return function (acc, msg, index) {\n    var isLastMessage = index === total - 1;\n    addDateMarker(acc, msg);\n    groupMessages(acc, msg, isLastMessage);\n\n    if (msg.attachments && msg.attachments.length > 1) {\n      acc.push({\n        type: 'attachment-group',\n        attachments: msg.attachments,\n        attachmentLayout: msg.attachmentLayout,\n        timestamp: msg.timestamp,\n        trackBy: msg\n      });\n    }\n\n    if (msg.suggestedActions && isLastMessage) {\n      acc.push({\n        type: 'action-group',\n        actions: msg.suggestedActions,\n        timestamp: msg.timestamp,\n        trackBy: msg\n      });\n    }\n\n    return acc;\n  };\n};\n\nfunction assignSelectionIndices(viewItems) {\n  var selectionCounter = 0;\n  viewItems.forEach(function (viewItem) {\n    if (viewItem.type === 'message-group') {\n      viewItem.messages.forEach(function (msg) {\n        msg.selectionIndex = selectionCounter++;\n      });\n    } else if (viewItem.type === 'attachment-group' || viewItem.type === 'action-group') {\n      viewItem.selectionIndex = selectionCounter++;\n    }\n  });\n  viewItems.lastSelectionIndex = selectionCounter - 1;\n}\n/**\n * @hidden\n */\n\n\nexport var convertMsgsToViewItems = function (messages) {\n  var items = messages.slice();\n  var result = items.reduce(groupItems(messages.length), []);\n  assignSelectionIndices(result);\n  return result;\n};","map":{"version":3,"sources":["C:/Users/vishn/Desktop/AuthInMern/client/node_modules/@progress/kendo-react-conversational-ui/dist/es/ViewItem.js"],"names":["isAuthor","last","arr","length","dateChanged","curr","prev","getDate","getMonth","getFullYear","addDateMarker","acc","msg","timestamp","lastItem","dateMarker","type","trackBy","getTime","push","groupMessages","isLastMessage","messages","undefined","typing","author","groupItems","total","index","attachments","attachmentLayout","suggestedActions","actions","assignSelectionIndices","viewItems","selectionCounter","forEach","viewItem","selectionIndex","lastSelectionIndex","convertMsgsToViewItems","items","slice","result","reduce"],"mappings":"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","sourcesContent":["import { isAuthor } from './utils';\nvar last = function (arr) { return arr[arr.length - 1]; };\nvar dateChanged = function (curr, prev) {\n    return (curr && prev) && (prev.getDate() !== curr.getDate() ||\n        prev.getMonth() !== curr.getMonth() ||\n        prev.getFullYear() !== curr.getFullYear());\n};\nvar addDateMarker = function (acc, msg) {\n    var timestamp = msg.timestamp;\n    var lastItem = last(acc);\n    if (!timestamp) {\n        return;\n    }\n    if (!lastItem || dateChanged(timestamp, lastItem.timestamp)) {\n        var dateMarker = {\n            type: 'date-marker',\n            timestamp: timestamp,\n            trackBy: timestamp.getTime()\n        };\n        acc.push(dateMarker);\n    }\n};\nvar groupMessages = function (acc, msg, isLastMessage) {\n    var lastItem = last(acc);\n    var messages = undefined;\n    if (msg.typing && !isLastMessage) {\n        return;\n    }\n    if (lastItem && lastItem.type === 'message-group') {\n        messages = lastItem.messages;\n    }\n    if (messages && isAuthor(msg.author, last(messages))) {\n        messages.push(msg);\n    }\n    else {\n        acc.push({\n            type: 'message-group',\n            messages: [msg],\n            author: msg.author,\n            timestamp: msg.timestamp,\n            trackBy: msg\n        });\n    }\n};\nvar groupItems = function (total) { return function (acc, msg, index) {\n    var isLastMessage = index === total - 1;\n    addDateMarker(acc, msg);\n    groupMessages(acc, msg, isLastMessage);\n    if (msg.attachments && msg.attachments.length > 1) {\n        acc.push({\n            type: 'attachment-group',\n            attachments: msg.attachments,\n            attachmentLayout: msg.attachmentLayout,\n            timestamp: msg.timestamp,\n            trackBy: msg\n        });\n    }\n    if (msg.suggestedActions && isLastMessage) {\n        acc.push({\n            type: 'action-group',\n            actions: msg.suggestedActions,\n            timestamp: msg.timestamp,\n            trackBy: msg\n        });\n    }\n    return acc;\n}; };\nfunction assignSelectionIndices(viewItems) {\n    var selectionCounter = 0;\n    viewItems.forEach(function (viewItem) {\n        if (viewItem.type === 'message-group') {\n            viewItem.messages.forEach(function (msg) {\n                msg.selectionIndex = selectionCounter++;\n            });\n        }\n        else if (viewItem.type === 'attachment-group' || viewItem.type === 'action-group') {\n            viewItem.selectionIndex = selectionCounter++;\n        }\n    });\n    viewItems.lastSelectionIndex = selectionCounter - 1;\n}\n/**\n * @hidden\n */\nexport var convertMsgsToViewItems = function (messages) {\n    var items = messages.slice();\n    var result = items.reduce(groupItems(messages.length), []);\n    assignSelectionIndices(result);\n    return result;\n};\n"]},"metadata":{},"sourceType":"module"}